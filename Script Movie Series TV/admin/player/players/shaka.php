<?php// shaka.php - Shaka Player Implementationheader('X-Frame-Options: SAMEORIGIN');header('Content-Type: text/html; charset=UTF-8');// Obtener parámetros$src = $_GET['src'] ?? '';$type = $_GET['type'] ?? 'mpd';$provider = $_GET['provider'] ?? 'direct';$autoplay = $_GET['autoplay'] ?? '0';$controls = $_GET['controls'] ?? '1';if (empty($src)) {    die('<div style="text-align:center;padding:50px;color:#fff;background:#000;">? No se proporcionó URL de video</div>');}// Función para procesar URLs según el proveedorfunction processVideoURL($src, $provider) {    switch ($provider) {        case 'gdrive':            if (strpos($src, 'drive.google.com') !== false) {                preg_match('/\/d\/([a-zA-Z0-9-_]+)/', $src, $matches);                $fileId = $matches[1] ?? $src;            } else {                $fileId = $src;            }            return "https://drive.google.com/uc?export=download&id=" . $fileId;                    case 'dropbox':            return str_replace(['?dl=0', '?dl=1'], '?dl=1', $src);                    case 'onedrive':            return str_replace('/view?', '/download?', $src);                    default:            return $src;    }}$processedSrc = processVideoURL($src, $provider);$playerId = 'shakaplayer_' . uniqid();?><!DOCTYPE html><html lang="es"><head>    <meta charset="UTF-8">    <meta name="viewport" content="width=device-width, initial-scale=1.0">    <title>Shaka Player</title>    <style>        * { margin: 0; padding: 0; box-sizing: border-box; }        body {             background: #000;             font-family: Arial, sans-serif;             display: flex;             justify-content: center;             align-items: center;             min-height: 100vh;         }        .player-container {             width: 100%;             max-width: 100%;             position: relative;             background: #000;            border-radius: 8px;            overflow: hidden;        }        video {            width: 100%;            height: auto;            display: block;            background: #000;        }        .error-container {            background: #1a1a1a;            color: #ff6b6b;            padding: 40px 20px;            text-align: center;            border-radius: 8px;        }        .loading {            color: #fff;            text-align: center;            padding: 40px 20px;            background: #1a1a1a;            border-radius: 8px;        }        .shaka-info {            position: absolute;            top: 10px;            right: 10px;            background: rgba(0,0,0,0.8);            color: #00d4aa;            padding: 5px 10px;            border-radius: 4px;            font-size: 11px;            font-family: monospace;        }        .stats-overlay {            position: absolute;            bottom: 10px;            left: 10px;            background: rgba(0,0,0,0.8);            color: #00d4aa;            padding: 8px;            border-radius: 4px;            font-size: 10px;            font-family: monospace;            display: none;        }        .controls-overlay {            position: absolute;            top: 10px;            left: 10px;            z-index: 1000;            display: flex;            gap: 10px;        }        .control-select {            background: rgba(0,0,0,0.8);            color: white;            border: 1px solid #555;            border-radius: 4px;            padding: 5px;            font-size: 12px;        }    </style>    <script src="https://ajax.googleapis.com/ajax/libs/shaka-player/4.7.11/shaka-player.compiled.js"></script></head><body>    <div class="player-container">        <div id="loading" class="loading">?? Inicializando Shaka Player...</div>        <video             id="<?= $playerId ?>"             <?= $controls === '1' ? 'controls' : '' ?>            <?= $autoplay === '1' ? 'autoplay muted' : '' ?>            preload="metadata"            playsinline            style="display: none;"        >            Tu navegador no soporta la reproducción de video HTML5.        </video>                <div class="shaka-info" id="shakaInfo" style="display: none;">            SHAKA        </div>                <div class="stats-overlay" i